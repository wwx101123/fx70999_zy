<!DOCTYPE html>
<!--HTML5 doctype-->
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
		<title>会员注册 </title>
		<link rel="stylesheet" type="text/css" href="../css/validate.css" />
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/new_file.css" />
		<script type="text/javascript" charset="utf-8" src="../js/mui.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../css/mui.min.css" />
		<link rel="stylesheet" type="text/css" href="../css/jquery-weui.css" />

		<script type="text/javascript" charset="utf-8" src="../js/zepto.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="../js/common.js"></script>
		<script type="text/javascript" charset="utf-8" src="../js/base.js"></script>
		<script type="text/javascript" charset="utf-8" src="../js/user.js"></script>
		<script type="text/javascript" charset="utf-8" src="../js/mvalidate.js"></script>
		<script type="text/javascript" charset="utf-8" src="../js/mvalidate-extend.js"></script>
		<style type="text/css">
			a,
			body,
			center,
			cite,
			code,
			dd,
			del,
			div,
			dl,
			dt,
			em,
			fieldset,
			figcaption,
			figure,
			footer,
			form,
			h1,
			h2,
			h3,
			h4,
			h5,
			h6,
			header,
			hr,
			html,
			img,
			input,
			label,
			legend,
			li,
			mark,
			ol,
			p,
			section,
			span,
			strong,
			textarea,
			time,
			ul,
			var input {
				margin: 0;
				border: 0;
				padding: 0;
				font-style: normal;
				color: #323232;
				box-sizing: border-box;
				-moz-box-sizing: border-box;
				/* Firefox */
				-webkit-box-sizing: border-box;
				/* Safari */
			}
			
			ol,
			ul {
				list-style: none;
			}
			
			.content {
				margin: 50px 0 20px;
				text-align: center;
			}
			
			.password {
				height: 50px;
				line-height: 50px;
				width: 300px;
				margin: 0 auto;
				background-color: #fff;
			}
			
			.password span {
				float: left;
				width: 50px;
				height: 50px;
				line-height: 50px;
				border: 1px solid #ccc;
				text-align: center;
			}
			
			.password span {
				border-right: none;
			}
			
			.password span:last-child {
				border-right: 1px solid #ccc;
			}
			
			.keyboard {
				position: fixed;
				width: 100%;
				left: 0;
				bottom: 0;
			}
			
			.keyboard>li {
				float: left;
				line-height: 50px;
				width: 33.3%;
				text-align: center;
				background-color: #fff;
			}
			
			.bottom_border {
				border-bottom: 1px solid #ccc;
			}
			
			.top_border {
				border-top: 1px solid #ccc;
			}
			
			.right_border {
				border-right: 1px solid #ccc;
			}
		</style>
	</head>

	<body>
		<input type="hidden" id="step" value="1" />
		<input type="hidden" id="old_pwd" />
		<input type="hidden" id="pwd" />
		<input type="hidden" id="repwd" />
		<div class="content">
			请输入当前二级密码
		</div>
		<div class="password">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<button style="display: none;" id="btnSubmit" name="btnSubmit" type="button" onclick="pwdEdit2()" class="login_go_div">完成</button>
		<ul class="keyboard clearfix">
			<li class="bottom_border right_border top_border">1</li>
			<li class="bottom_border right_border top_border">2</li>
			<li class="bottom_border top_border">3</li>
			<li class="bottom_border right_border ">4</li>
			<li class="bottom_border right_border">5</li>
			<li class="bottom_border ">6</li>
			<li class="bottom_border right_border">7</li>
			<li class="bottom_border right_border">8</li>
			<li class="bottom_border ">9</li>
			<li style="background-color: #d5d8db;">&nbsp;</li>
			<li>0</li>
			<li style="background-color: #d5d8db;">删除</li>
		</ul>
		<script type="text/javascript">
			var keyboard = document.querySelector('.keyboard').querySelectorAll('li');
			for(var i = 0; i < keyboard.length; i++) {
				keyboard[i].addEventListener('click', function() {
					set_num(this.innerHTML)
				}, false);
			}

			function set_num(num) {
				var spans = document.querySelector('.password').querySelectorAll('span');
				if(/[0-9]/.test(num)) {
					var index = 0;
					for(var i = 0; i < spans.length; i++) {
						var val = spans[i].innerHTML;
						index = i;
						if(!val) {
							spans[i].innerHTML = num;
							spans[i].setAttribute('data-num', num);
							setTimeout(function() {
								spans[i].innerHTML = '*';
							}, 200);
							break;
						}
					}
					if(index == 5) {
						var password = '';
						for(var j = 0; j < spans.length; j++) {
							var val = spans[j].getAttribute('data-num');
							password += val;
						}
						var step = $('#step').val();

						if(step == 1) {
							checkpassword2(password, init_data)
						}
						if(step == 2) {

						}
						if(step == 3) {

						} else {
							setTimeout(function() {
								for(var k = 0; k < spans.length; k++) {
									spans[k].innerHTML = '';
									spans[k].setAttribute('data-num', '');
								}
							}, 300);
						}
					}
				} else if(num == '删除') {
					var index = 0;
					for(var i = 0; i < spans.length; i++) {
						var val = spans[i].innerHTML;
						if(val) {
							index = i;
						}
					}
					spans[index].innerHTML = '';
					spans[index].setAttribute('data-num', '');
				}
			}

			function init_data(data) {
				if(data.status == 1) {　
					localStorage.setItem('check_password2', 1)
					mui.back();
				}
			}
			mui.init({
				beforeback: function() {　　　
					var list = plus.webview.currentWebview().opener();　
					mui.fire(list, 'check_password2');

				}
			});
		</script>
	</body>

</html>