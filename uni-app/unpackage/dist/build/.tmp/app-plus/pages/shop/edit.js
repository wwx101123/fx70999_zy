(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/edit"],{"13b9":function(t,e,a){"use strict";a("feb3");var i=s(a("b0ce")),o=s(a("f4d7"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(o.default))},"188b":function(t,e,a){},"376d":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a("a34a")),o=r(a("ff50")),s=r(a("6511")),n=a("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function c(t,e,a,i,o,s,n){try{var r=t[s](n),c=r.value}catch(l){return void a(l)}r.done?e(c):Promise.resolve(c).then(i,o)}function l(t){return function(){var e=this,a=arguments;return new Promise(function(i,o){var s=t.apply(e,a);function n(t){c(s,i,o,n,r,"next",t)}function r(t){c(s,i,o,n,r,"throw",t)}n(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){d(t,e,a[e])})}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p={components:{mpvueCityPicker:o.default},computed:u({},(0,n.mapState)(["hasLogin","userInfo","bi"])),data:function(){return{shopData:{name:"",mobile:"",address:"在地图选择",area:"请选择省市区",seller_id:0},lotusAddressData:{visible:!1,provinceName:"广东省",cityName:"广州市",townName:"天河区"},region:"",basicArr:[],upImgBasic:{basicConfig:{url:s.default.Upload},notli:!0,count:1,sourceType:"camera",sizeType:!0,upBgColor:"#E8A400",upIconColor:"#fff",delBtnLocation:"",iconReplace:""}}},successCallback:function(t){console.log(2222)},onLoad:function(){var e=this;console.log(e.userInfo.id),t.request({url:s.default.seller_edit,data:{is_mobile:1,id:e.userInfo.id},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t.data.data.id),1==t.data.status&&(e.shopData.title=t.data.data.title,e.shopData.province=t.data.data.province,e.shopData.city=t.data.data.city,e.shopData.area=t.data.data.area,e.shopData.address=t.data.data.address,e.shopData.mobile=t.data.data.phone,e.shopData.seller_id=t.data.data.id,console.log(t.data.data.img),e.upImgBasic.iconReplace=s.default.IP+t.data.data.img,e.basicArr.push(t.data.data.img))}})},methods:{uImageTap:function(){this.$refs.uImage.uploadimage(this.upImgBasic)},delImgInfo:function(){var t=l(i.default.mark(function t(e){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("你删除的图片地址为:",e,this.basicArr.splice(e.index,1));case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),upBasicData:function(){var e=l(i.default.mark(function e(a){var o,s,n;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("===>",a),o=[],s=0,n=a.length;case 3:if(!(s<n)){e.next=16;break}if(e.prev=4,""==a[s].path){e.next=8;break}return e.next=8,o.push(a[s].path.split(","));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),console.log("上传失败...");case 13:s++,e.next=3;break;case 16:this.basicArr=o,o.length==this.upImgBasic.count&&t.showToast({title:"上传成功",icon:"none"});case 18:case"end":return e.stop()}},e,this,[[4,10]])}));function a(t){return e.apply(this,arguments)}return a}(),getUpImgInfoBasic:function(){console.log("后端转成一维数组:",this.basicArr.join().split(","))},chooseCity:function(){this.$refs.mpvueCityPicker.show()},onConfirm:function(t){var e=t.label.split("-");this.shopData.province=e[0],this.shopData.city=e[1],this.shopData.area=e[2],this.cityPickerValue=t.value},chooseLocation:function(){var e=this;t.chooseLocation({success:function(t){e.shopData.address=t.name}})},confirm:function(){var e=this.shopData;if(e.title)if(e.address)if(e.province){var a=this;t.request({url:s.default.open_seller_step4,data:{is_mobile:1,txtProvince:e.province,txtCity:e.city,txtArea:e.area,title:e.title,txtAddress:e.address,txtMobile:e.mobile,user_id:a.userInfo.id,seller_id:e.seller_id,img_url:a.basicArr[0]},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){1==e.data.status?(a.$api.msg(e.data.info),setTimeout(function(){t.navigateBack()},800)):a.$api.msg(e.data.info)}})}else this.$api.msg("请选择地区");else this.$api.msg("请在地图选择所在位置");else this.$api.msg("请填写店铺名称")}}};e.default=p}).call(this,a("6e42")["default"])},"596b":function(t,e,a){"use strict";var i=a("188b"),o=a.n(i);o.a},ec81:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("view",{staticClass:"row b-b",staticStyle:{height:"100px"}},[a("text",{staticClass:"tit"},[t._v("LOGO")]),a("view",[a("sunui-upbasic",{ref:"uImage",attrs:{upImgConfig:t.upImgBasic,eventid:"3db9078a-0",mpcomid:"3db9078a-0"},on:{onUpImg:t.upBasicData,onImgDel:t.delImgInfo}})],1)]),a("view",{staticClass:"row b-b"},[a("text",{staticClass:"tit"},[t._v("店铺名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shopData.title,expression:"shopData.title"}],staticClass:"input",attrs:{type:"text",placeholder:"店铺名称","placeholder-class":"placeholder",eventid:"3db9078a-1"},domProps:{value:t.shopData.title},on:{input:function(e){e.target.composing||(t.shopData.title=e.target.value)}}})]),a("view",{staticClass:"row b-b"},[a("text",{staticClass:"tit"},[t._v("所属地区")]),a("view",{staticClass:"input",attrs:{eventid:"3db9078a-2"},on:{tap:t.chooseCity}},[t._v(t._s(t.shopData.province)+t._s(t.shopData.city)+t._s(t.shopData.area))])]),a("view",{staticClass:"row b-b"},[a("text",{staticClass:"tit"},[t._v("详细地址")]),a("text",{staticClass:"input",attrs:{width:"100%",eventid:"3db9078a-3"},on:{click:t.chooseLocation}},[t._v(t._s(t.shopData.address))]),a("text",{staticClass:"yticon icon-shouhuodizhi"})]),a("view",{staticClass:"row b-b"},[a("text",{staticClass:"tit"},[t._v("联系电话")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shopData.mobile,expression:"shopData.mobile"}],staticClass:"input",attrs:{type:"text",placeholder:"联系电话","placeholder-class":"placeholder",eventid:"3db9078a-4"},domProps:{value:t.shopData.mobile},on:{input:function(e){e.target.composing||(t.shopData.mobile=e.target.value)}}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shopData.id,expression:"shopData.id"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"input",attrs:{type:"text",eventid:"3db9078a-5"},domProps:{value:t.shopData.id},on:{input:function(e){e.target.composing||(t.shopData.id=e.target.value)}}}),a("button",{staticClass:"add-btn",attrs:{eventid:"3db9078a-6"},on:{click:t.confirm}},[t._v("提交")]),a("mpvue-city-picker",{ref:"mpvueCityPicker",attrs:{themeColor:t.themeColor,pickerValueDefault:t.cityPickerValue,eventid:"3db9078a-7",mpcomid:"3db9078a-1"},on:{onCancel:t.onCancel,onConfirm:t.onConfirm}})],1)},o=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o})},f173:function(t,e,a){"use strict";a.r(e);var i=a("376d"),o=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=o.a},f4d7:function(t,e,a){"use strict";a.r(e);var i=a("ec81"),o=a("f173");for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);a("596b");var n=a("2877"),r=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports}},[["13b9","common/runtime","common/vendor"]]]);