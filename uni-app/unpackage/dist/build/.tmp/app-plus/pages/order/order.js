(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"0955":function(t,e,a){},"3b32":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("view",{staticClass:"navbar"},t._l(t.navList,function(e,n){return a("view",{key:n,staticClass:"nav-item",class:{current:t.tabCurrentIndex==n},attrs:{eventid:"dc0414d8-0-"+n},on:{click:function(e){t.tabClick(n)}}},[t._v(t._s(e.text))])})),a("mescroll-uni",{attrs:{eventid:"dc0414d8-3",mpcomid:"dc0414d8-3"},on:{down:t.downCallback,up:t.upCallback,init:t.mescrollInit}},t._l(t.orderList,function(e,n){return a("view",{key:n,staticClass:"order-item"},[a("view",{staticClass:"i-top b-b"},[a("text",{staticClass:"time"},[t._v(t._s(e.addtime_str))]),a("text",{staticClass:"state",style:{color:e.stateTipColor}},[t._v(t._s(e.status_str))])]),t._l(e.order_goods,function(e,o){return a("view",{key:o,staticClass:"goods-box-single"},[a("image",{staticClass:"goods-img",attrs:{src:e.icon,mode:"aspectFill"}}),a("view",{staticClass:"right"},[a("text",{staticClass:"title clamp"},[t._v(t._s(e.goods_title))]),a("uni-view",{staticClass:"price-number",attrs:{"data-v-23b32da1":"",mpcomid:"dc0414d8-2-"+n+"-"+o}},[a("uni-view",{staticClass:"price",attrs:{"data-v-23b32da1":"",mpcomid:"dc0414d8-0-"+n+"-"+o}},[t._v(t._s(e.goods_price))]),t._v("x"),a("uni-view",{staticClass:"number",attrs:{"data-v-23b32da1":"",mpcomid:"dc0414d8-1-"+n+"-"+o}},[t._v(t._s(e.quantity))])],1)],1)])}),a("view",{staticClass:"price-box"},[t._v("共"),a("text",{staticClass:"num"},[t._v(t._s(e.order_quantity))]),t._v("件商品 实付款"),a("text",{staticClass:"price"},[t._v(t._s(e.order_amount))])]),9!=e.state?a("view",{staticClass:"action-box b-t"},[1==e.status?a("button",{staticClass:"action-btn",attrs:{eventid:"dc0414d8-1-"+n},on:{click:function(a){t.cancelOrder(e)}}},[t._v("取消订单")]):t._e(),1==e.is_show_daifu?a("button",{staticClass:"action-btn recom",attrs:{eventid:"dc0414d8-2-"+n},on:{click:function(a){t.navToPage(e.help_pay_url)}}},[t._v("找人代付")]):t._e(),1==e.payment_status?a("button",{staticClass:"action-btn recom"},[t._v("立即支付")]):t._e()],1):t._e()],2)}))],1)},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},"45d3":function(t,e,a){"use strict";a.r(e);var n=a("3b32"),o=a("a84c");for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);a("95cf");var r=a("2877"),s=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"6b00":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(a("880c")),o=c(a("93e0")),i=c(a("4b50")),r=c(a("6511")),s=(c(a("feb2")),a("2f62"));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){u(t,e,a[e])})}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d={components:{MescrollUni:n.default,uniLoadMore:o.default,empty:i.default},computed:l({},(0,s.mapState)(["hasLogin","userInfo","bi"])),data:function(){return{mescroll:null,downOption:{use:!0,auto:!0},upOption:{use:!1,auto:!1},tabCurrentIndex:0,navList:[{state:1,text:"全部",loadingType:"more",orderList:[]},{state:2,text:"待付款",loadingType:"more",orderList:[]},{state:3,text:"待发货",loadingType:"more",orderList:[]},{state:4,text:"待收货",loadingType:"more",orderList:[]},{state:5,text:"已完成",loadingType:"more",orderList:[]}],orderList:[]}},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onLoad:function(t){console.log(t.state),this.tabCurrentIndex=t.state-1},methods:{mescrollInit:function(t){this.mescroll=t},downCallback:function(t){t.resetUpScroll()},upCallback:function(t){var e=this;this.getListDataFromNet(r.default.get_user_order,t.num,t.size,function(a){console.log("mescroll.num="+t.num+", mescroll.size="+t.size+", curPageData.length="+a.length),t.endSuccess(a.length),1==t.num&&(e.orderList=[]),e.orderList=e.orderList.concat(a)},function(){t.endErr()})},getListDataFromNet:function(e,a,n,o,i){var r=this;setTimeout(function(){try{t.request({url:e,data:{is_mobile:1,user_id:r.userInfo.id,page_index:a,page_size:n,type:r.navList[r.tabCurrentIndex].state},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){t.data.status,null==t.data.data&&(t.data.data=[]),o&&o(t.data.data)}})}catch(s){i&&i()}},500)},navToPage:function(e){t.navigateTo({url:e})},loadData:function(t){},changeTab:function(t){this.tabCurrentIndex=t.target.current,this.loadData("tabChange")},tabClick:function(t){this.tabCurrentIndex=t,this.mescroll.triggerDownScroll()},deleteOrder:function(e){var a=this;t.showLoading({title:"请稍后"}),setTimeout(function(){a.navList[a.tabCurrentIndex].orderList.splice(e,1),t.hideLoading()},600)},cancelOrder:function(e){t.showLoading({title:"请稍后"});var a=this;t.request({url:r.default.order_cancel,data:{is_mobile:1,user_id:a.userInfo.id,order_id:e.id},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){1==e.data.status&&(a.mescroll.triggerDownScroll(),setTimeout(function(){t.hideLoading()},600))}})},orderStateExp:function(t){var e="",a="#fa436a";switch(+t){case 1:e="待付款";break;case 2:e="待发货";break;case 9:e="订单已关闭",a="#909399";break}return{stateTip:e,stateTipColor:a}}}};e.default=d}).call(this,a("6e42")["default"])},"929b":function(t,e,a){"use strict";a("feb3");var n=i(a("b0ce")),o=i(a("45d3"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},"95cf":function(t,e,a){"use strict";var n=a("0955"),o=a.n(n);o.a},a84c:function(t,e,a){"use strict";a.r(e);var n=a("6b00"),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=o.a}},[["929b","common/runtime","common/vendor"]]]);