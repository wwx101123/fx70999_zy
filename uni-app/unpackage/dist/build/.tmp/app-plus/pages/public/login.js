(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/public/login"],{2104:function(t,e,n){"use strict";n("feb3");var o=a(n("b0ce")),i=a(n("3887"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(i.default))},3738:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"container"},[n("view",{staticClass:"left-bottom-sign"}),n("view",{staticClass:"back-btn yticon icon-zuojiantou-up",attrs:{eventid:"43c068dc-0"},on:{click:t.navBack}}),n("view",{staticClass:"right-top-sign"}),n("view",{staticClass:"wrapper"},[n("view",{staticClass:"left-top-sign"},[t._v("LOGIN")]),n("view",{staticClass:"welcome"},[t._v("欢迎回来！")]),n("view",{staticClass:"input-content"},[n("view",{staticClass:"input-item"},[n("text",{staticClass:"tit"},[t._v("用户名")]),n("input",{attrs:{type:"text",value:"",placeholder:"请输入用户名",maxlength:"11","data-key":"mobile",eventid:"43c068dc-1"},on:{input:t.inputChange}})]),n("view",{staticClass:"input-item"},[n("text",{staticClass:"tit"},[t._v("密码")]),n("input",{attrs:{type:"mobile",value:"",placeholder:"8-18位不含特殊字符的数字、字母组合","placeholder-class":"input-empty",maxlength:"20",password:"","data-key":"password",eventid:"43c068dc-2"},on:{input:t.inputChange,confirm:t.toLogin}})])]),n("button",{staticClass:"confirm-btn",attrs:{disabled:t.logining,eventid:"43c068dc-3"},on:{click:t.toLogin}},[t._v("登录")]),n("view",{staticClass:"forget-section"},[t._v("忘记密码?")])],1),n("view",{staticClass:"register-section"},[t._v("还没有账号?"),n("text",{attrs:{eventid:"43c068dc-4"},on:{click:t.toRegist}},[t._v("马上注册")])])])},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},3887:function(t,e,n){"use strict";n.r(e);var o=n("3738"),i=n("e939");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("d2e5");var r=n("2877"),s=Object(r["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=s.exports},"3bf0":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("a34a")),i=r(n("6511")),a=(r(n("5665")),n("2f62"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,o,i,a,r){try{var s=t[a](r),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(o,i)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function r(t){s(a,o,i,r,u,"next",t)}function u(t){s(a,o,i,r,u,"throw",t)}r(void 0)})}}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={data:function(){return{mobile:"admin",password:"1",logining:!1}},onLoad:function(){if(console.log(this.hasLogin),this.hasLogin){var e=t.getStorageSync("userInfo")||"";e.id&&(this.mobile=e.user_id,this.password=e.pwd1),this.toLogin()}},onBackPress:function(){var e=this;if(void 0==e.userInfo)return console.log(e.userInfo),this.showMask?(this.showMask=!1,!0):(t.showModal({title:"提示",content:"是否退出uni-app？",success:function(t){t.confirm?plus.runtime.quit():t.cancel&&console.log("用户点击取消")}}),!0)},computed:c({},(0,a.mapState)(["hasLogin","userInfo","bi"])),methods:c({},(0,a.mapMutations)(["login"]),{inputChange:function(t){var e=t.currentTarget.dataset.key;this[e]=t.detail.value},navBack:function(){t.navigateBack()},navTo:function(e){t.navigateTo({url:e})},toRegist:function(){this.navTo("/pages/user/register")},toLogin:function(){var e=u(o.default.mark(function e(){var n,a,r;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.logining=!0,n=this.mobile,a=this.password,{mobile:n,password:a},r=this,console.log(r.userInfo),t.request({url:i.default.checkLoginUrl,data:{is_mobile:1,username:n,password:a},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){console.log(e.data.status),1==e.data.status?t.request({url:i.default.userInfoUrl,data:{is_mobile:1,id:e.data.data.id},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){if(console.log(e.data.status),1==e.data.status){r.login(e.data);var n=getCurrentPages(),o=n[n.length-2];"pages/product/product"==o.route&&r.$api.prePage().refresh(),"pages/cart/cart"==o.route&&r.$api.prePage().refresh(),t.navigateBack()}else r.$api.msg(e.data.info),r.logining=!1}}):(r.$api.msg(e.data.info),r.logining=!1)}});case 6:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()})};e.default=f}).call(this,n("6e42")["default"])},5665:function(t,e,n){"use strict";(function(t){function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function e(t){o(this,e),r(this,"config",{baseUrl:"",header:{"Content-Type":"application/json;charset=UTF-8"},method:"GET",dataType:"json",responseType:"text",success:function(){},fail:function(){},complete:function(){}}),r(this,"interceptor",{request:function(t){t&&(e.requestBeforeFun=t)},response:function(t){t&&(e.requestComFun=t)}}),this.request(t)}return a(e,[{key:"setConfig",value:function(t){this.config=t(this.config)}},{key:"request",value:function(){var o=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.baseUrl=i.baseUrl||this.config.baseUrl,i.dataType=i.dataType||this.config.dataType,i.url=e.posUrl(i.url)?i.url:i.baseUrl+i.url,i.data=i.data||{},i.header=i.header||this.config.header,i.method=i.method||this.config.method,new Promise(function(a,r){var s=null;i.complete=function(t){var n=t.statusCode;t.config=s,t=e.requestComFun(t),200===n?a(t):r(t)};var u=n({},o.config,i);s=n({},u,e.requestBeforeFun(u)),t.request(s)})}},{key:"get",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.url=t,n.data=e,n.method="GET",this.request(n)}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.url=t,n.data=e,n.method="POST",this.request(n)}}],[{key:"posUrl",value:function(t){return/(http|https):\/\/([\w.]+\/?)\S*/.test(t)}},{key:"requestBeforeFun",value:function(t){return t}},{key:"requestComFun",value:function(t){return t}}]),e}();e.default=s}).call(this,n("6e42")["default"])},d2e5:function(t,e,n){"use strict";var o=n("dd28"),i=n.n(o);i.a},dd28:function(t,e,n){},e939:function(t,e,n){"use strict";n.r(e);var o=n("3bf0"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=i.a}},[["2104","common/runtime","common/vendor"]]]);