
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport"
	content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0,user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<title>会员管理</title>
<link rel="stylesheet" type="text/css"
	href="__PUBLIC__/scripts/artdialog/ui-dialog.css" />
<link rel="stylesheet" type="text/css"
	href="__PUBLIC__/Adm/skin/icon/iconfont.css" />
<link rel="stylesheet" type="text/css"
	href="__PUBLIC__/Adm/skin/default/style.css" />
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/scripts/jquery/jquery-1.11.2.min.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/scripts/jquery/jquery.nicescroll.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/scripts/artdialog/dialog-plus-min.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/Adm/js/layindex.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/Adm/js/laymain.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/Adm/js/common.js"></script>
<script type="text/javascript" src="__PUBLIC__/Adm/layui/layui.js"></script>
<link href="__PUBLIC__/Adm/layui/css/layui.css" rel="stylesheet">
<link href="__PUBLIC__/Adm/css/page.css" rel="stylesheet">
<style type="text/css">
b {
	display: none
}

td {
	text-align: center
}
</style>

</head>

<body class="mainbody">
	<form id="form1" runat="server">
		<!--导航栏-->
		<div class="location">
			<a href="javascript:history.back(-1);" class="back"><i
				class="iconfont icon-up"></i><span>返回上一页</span></a> <a
				href="../center.aspx" class="home"><i class="iconfont icon-home"></i><span>首页</span></a>
			<i class="arrow iconfont icon-arrow-right"></i> <span>会员管理</span> <i
				class="arrow iconfont icon-arrow-right"></i> <span>会员列表</span>
		</div>
		<!--/导航栏-->

		<!--工具栏-->
		<div id="floatHead" class="toolbar-wrap">
			<div class="toolbar">
				<div class="box-wrap">
					<a class="menu-btn"><i class="iconfont icon-more"></i></a>
					<div class="l-list">
						<ul class="icon-list">
							<li><a href="{:U('Reg/userReg')}"><i
									class="iconfont icon-close"></i><span>新增</span></a></li>



						</ul>
						<form class="form-inline title-form" name="qfrm" method="get"
						action="?action=query">
						<div class="menu-list">
						
							<input name="username" type="text" id="txtStartTime"
								class="input " placeholder="用户账号或姓名查询"
								value="{$user_id}">
							<div class="date-input">
								<i class="iconfont icon-date"></i><input name="time1"
									type="text" id="time1" class="input rule-date-input"
									placeholder="开始日期"
									onfocus="WdatePicker({dateFmt:'yyyy-MM-dd'})" value="{$s_time}">
							</div>
							-
							<div class="date-input">
								<i class="iconfont icon-date"></i><input name="time2"
									type="text" id="time2" class="input rule-date-input"
									placeholder="结束日期"
									onfocus="WdatePicker({dateFmt:'yyyy-MM-dd'})"value="{$e_time}">
							</div>

						</div>
						<button type="submit" class="btn btn-primary">查询</button>
						</form>
					</div>

				</div>
			</div>
		</div>

		<script type="text/javascript">
			layui.use('laydate', function() {
				var laydate = layui.laydate;
				var start = {
					// min: laydate.now(-2)
					max : '2099-06-16 23:59:59',
					istoday : false,
					choose : function(datas) {
						end.min = datas; //开始日选好后，重置结束日的最小日期
						end.start = datas //将结束日的初始值设定为开始日
					}
				};

				var end = {
					min : laydate.now(),
					max : '2099-06-16 23:59:59',
					istoday : false,
					choose : function(datas) {
						start.max = datas; //结束日选好后，重置开始日的最大日期
					}
				};

				$('#time1').on('click', function() {
					start.elem = this;
					laydate(start);
				});
				$('#time2').on('click', function() {
					end.elem = this
					laydate(end);
				});
			});
		</script>
		<!--/工具栏-->

		<!--列表-->
		<div class="table-container">
			<table width="100%" border="0" cellspacing="0" cellpadding="0"
				class="ltable">
				<tr>
					<th style="display: none">会员ID</th>
					<th style="width: 8%">用户账号</th>
					<th style="width: 5%">会员姓名</th>
					<!--  <th style="width: 5%">微信昵称</th>  -->
					<th style="width: 5%">会员昵称</th>
					<!-- <th style="width: 8%">所属区域</th> -->
					<th style="width: 8%;">累计业绩</th>
					<th style="width: 8%;">推荐人编号</th>
					<th style="width: 8%; display: none">团队交易量</th>
					<th style="display: none">会员性别</th>
					<th style="width: 10%">会员级别</th>
					<th style="display: none">消费金额</th>
					<th style="display: none">外部金额</th>
					<th style="display: none">动态等级</th>
					<th style="display: none">推荐金额</th>

					<th style="display: none">奖金累计</th>
					<th style="width: 5%">{$bi.agent_use}</th>
					<th style="display: none">分红金额</th>
					<!-- <th >{$bi.agent_kt}</th> -->
					<th>{$bi.buy_point}</th>
					<th>{$bi.agent_cash}</th>
					<th style="display: none">{$bi.love_money}</th>
					<th style="display: none">注册积分</th>
					<th style="display: none">激活点值</th>
					<th style="display: none">复投积分</th>
					<th style="display: none">幸运积分</th>
					<th style="display: none">拍币</th>
					<th style="display: none">{$bi.ssb}</th>
					<th style="display: none">股票点值</th>
					<th style="display: none">分红次数</th>
					<th style="width: 5%; display: none">{$bi.limit_money}</th>
					<th style="display: none">代理额度</th>
					<th style="display: none">{$bi.give_limit_money}</th>

					<th style="display: none">平移额度</th>
					<th style="display: none">平移现金</th>
					<!-- <th>日封顶</th>
							<th>周封顶</th>
							<th>月封顶</th> -->
					<th style="width: 10%">注册时间</th>
					<th style="width: 15%; display: none">审核时间</th>
					<th style="display: none">离封顶差距</th>
					<th style="display: none">是否空单</th>
					<th style="display: none">会员类型</th>
					<th style="display: none">委托拼单</th>
					<th style="display: none">是否爱心账户</th>
					<th style="display: none">账号状态</th>
					<th style="width: 5%; display: none">是否固定</th>
					<th>操作</th>
				</tr>
				<volist name="list" id="vo">


				<tr>
					<!--<td><b class="tablesaw-cell-label"></b><input type="checkbox" name="id[]" value="{$vo['id']}" class="btn2" /></td>-->
					<td style="display: none"><b class="tablesaw-cell-label">会员ID</b><span
						class="tablesaw-cell-content">{$vo.user_number}</span></td>
					<td><b class="tablesaw-cell-label">用户账号</b> <span
						class="rankcolor_1"> {$vo.user_id} </span></td>
					<td><b class="tablesaw-cell-label">会员姓名</b><span
						class="tablesaw-cell-content">{$vo.user_name}</span></td>
					<!-- 	<td><b class="tablesaw-cell-label">会员姓名</b><span
								class="tablesaw-cell-content"><img src="{$vo.weixinlogo}" width="20px" height="20px" >{$vo.wx_nickname}</span></td>  -->
					<td><b class="tablesaw-cell-label">会员姓名</b><span
						class="tablesaw-cell-content">{$vo.nickname}</span></td>
					<!-- <td><b class="tablesaw-cell-label">会员姓名</b><span
						class="tablesaw-cell-content">{$vo.province}{$vo.city}{$vo.area}</span></td> -->
					<td><b class="tablesaw-cell-label">会员姓名</b><span
						class="tablesaw-cell-content">{$vo.team_trade_money}</span></td>

					<td style="display: none"><b class="tablesaw-cell-label">会员姓名</b><span
						class="tablesaw-cell-content">{$vo.sex}</span></td>

					<td><b class="tablesaw-cell-label">分享人编号</b><span
						class="tablesaw-cell-content">{$vo.re_id|user_id=###}</span></td>
					<td><b class="tablesaw-cell-label">会员等级</b><span
						class="tablesaw-cell-content">{$vo.level_str}</span></td>
					<td style="display: none"><b class="tablesaw-cell-label">会员等级</b><span
						class="tablesaw-cell-content">{$vo.cpzj}</span></td>

					<td style="display: none"><b class="tablesaw-cell-label">会员等级</b><span
						class="tablesaw-cell-content">{$vo.cpzj}</span></td>
					<td style="display: none"><input user_id="{$vo.id}"
						value="{$vo.out_money}" style="WIDTH: 50px"
						onchange="ajaxUpdateField(this,'out_money');"></td>

					<td style="display: none"><b class="tablesaw-cell-label">分享人编号</b><span
						class="tablesaw-cell-content">{$vo.recommend_money}</span></td>

					<td style="display: none"><b class="tablesaw-cell-label">奖金累计</b><span
						class="tablesaw-cell-content">{$vo.zjj}</span></td>
					<td><b class="tablesaw-cell-label">现金点值</b><span
						class="tablesaw-cell-content"> {$vo.agent_use} </span></td>
					<td style="display: none"><b class="tablesaw-cell-label">现金点值</b><span
						class="tablesaw-cell-content"> {$vo.fanli_money} </span></td>
					<!--<td  ><b class="tablesaw-cell-label">现金点值</b><span
								class="tablesaw-cell-content"> {$vo.agent_kt} </span></td> -->
					<td><b class="tablesaw-cell-label">现金点值</b><span
						class="tablesaw-cell-content"> {$vo.buy_point} </span></td>
					<td><b class="tablesaw-cell-label">现金点值</b><span
						class="tablesaw-cell-content"> {$vo.agent_cash} </span></td>
					<td style="display: none"><b class="tablesaw-cell-label">现金点值</b><span
						class="tablesaw-cell-content"> {$vo.love_money} </span></td>
					<td style="display: none"><b class="tablesaw-cell-label">注册积分</b><span
						class="tablesaw-cell-content"><a href="#">{$vo.agent_cash}</a></span></td>
					<td style="display: none"><b class="tablesaw-cell-label">激活积分</b><span
						class="tablesaw-cell-content"> {$vo.agent_kt} </span></td>
					<td style="display: none"><b class="tablesaw-cell-label">复投积分</b><span
						class="tablesaw-cell-content"><a href="#">{$vo.agent_xf}</a></span></td>
					<td style="display: none"><b class="tablesaw-cell-label">幸运积分</b><span
						class="tablesaw-cell-content"><a href="#">{$vo.agent_cf}</a></span></td>
					<td style="display: none"><b class="tablesaw-cell-label">购物点值</b><span
						class="tablesaw-cell-content"> {$vo.buy_point} </span></td>
					<td style="display: none"><b class="tablesaw-cell-label">{$bi.ssb}</b><span
						class="tablesaw-cell-content"> {$vo.ssb} </span></td>
					<!--  <td><b class="tablesaw-cell-label">配送积分</b><span class="tablesaw-cell-content"><a href="#">{$vo.agent_gp}</a></span></td> -->
					<td style="display: none"><b class="tablesaw-cell-label">股票(股)</b><span
						class="tablesaw-cell-content"> {$vo.live_gupiao} </span></td>


					<td style="display: none"><span class="rankcolor_1">{$vo.fanli_count}
					</span></td>
					<td style="display: none"><span class="rankcolor_1">{$vo.limit_money}
					</span></td>
					<td style="display: none"><span class="rankcolor_1">{$vo.agent_limit_money}
					</span></td>
					<td style="display: none"><span class="rankcolor_1">{$vo.give_limit_money}
					</span></td>
					<td style="display: none"><input user_id="{$vo.id}"
						value="{$vo.extra_limit_money1}" style="WIDTH: 50px"
						onchange="ajaxUpdateField(this,'extra_limit_money1');"></td>
					<td style="display: none"><input user_id="{$vo.id}"
						value="{$vo.extra_limit_money}" style="WIDTH: 50px"
						onchange="ajaxUpdateField(this,'extra_limit_money');"></td>

					<!-- 	<td><eq name="vo.is_day_fending"
										value="0"> <font color="red"><i
										class="fa fa-close"></i>否</font></span> <else /> <font color="green"><i
									class="fa fa-check"></i>是</font></span> </eq>
							</td>
							<td><eq name="vo.is_week_fending"
										value="0"> <font color="red"><i
										class="fa fa-close"></i>否</font></span> <else /> <font color="green"><i
									class="fa fa-check"></i>是</font></span> </eq>
							</td>
							<td><eq name="vo.is_month_fending"
										value="0"> <font color="red"><i
										class="fa fa-close"></i>否</font></span> <else /> <font color="green"><i
									class="fa fa-check"></i>是</font></span> </eq>
							</td> -->



					<td style="display: none"><b class="tablesaw-cell-label">离封顶差距</b><span
						class="tablesaw-cell-content"><a href="#">{$vo.id|fdjuli}</a></span></td>
					<td style="display: none"><b class="tablesaw-cell-label">激活时间
					</b><span class="tablesaw-cell-content">{$vo['rdt']|date="Y-m-d
							H:i:s",###}</span></td>
					<td><b class="tablesaw-cell-label">激活时间 </b><span
						class="tablesaw-cell-content">{$vo['pdt']|date="Y-m-d
							H:i:s",###}</span></td>

					<td style="display: none"><b class="tablesaw-cell-label">权限</b><span
						class="tablesaw-cell-content"> <eq name="vo.is_money"
								value="0"> <font color="red"><i class="fa fa-check"></i>是</font></span>
						<else /> <font color="green"><i class="fa fa-close"></i>否</font></span>
						</eq></td>
					<td style="display: none"><b class="tablesaw-cell-label">账号状态</b><span
						class="tablesaw-cell-content"> <!-- <eq name="vo.is_sys"
										value="0"> <font color="green"> 正常</font></span> <else /> <font color="green"> 特殊</font></span> </eq>
								 --> <select user_id="{$vo.id}" class="register_type"
							onchange="ajaxUpdateField(this,'is_sys');"><option
									value="0"<eq name="vo.is_sys" value="0"> selected
									</eq> >正常
								</option>
								<option value="1"<eq name="vo.is_sys" value="1">
									selected </eq>>特殊
								</option>
						</select> <!--  <eq name="vo.register_type"
										value="0"> <font color="green"> 币玩家</font></span> <else /> <font color="green"> 商城玩家</font></span> </eq> --></td>



					<td style="display: none"><b class="tablesaw-cell-label">权限</b><span
						class="tablesaw-cell-content"> <eq name="vo.is_tixian"
								value="1"> <font color="red"><i class="fa fa-check"></i>是</font></span>
						<else /> <font color="green"><i class="fa fa-close"></i>否</font></span>
						</eq></td>
					<td style="display: none"><eq name="vo.is_love" value="0">
						<font color="red"><i class="fa fa-close"></i>否</font> </span> <else /> <font
							color="green"><i class="fa fa-check"></i>是</font> </span> </eq></td>
					<td style="display: none"><eq name="vo.is_gd" value="0">
						<font color="red"><i class="fa fa-close"></i>否</font> </span> <else /> <font
							color="green"><i class="fa fa-check"></i>是</font> </span> </eq></td>
					<td><b class="tablesaw-cell-label">操作</b> <span
						class="tablesaw-cell-content"> <!--<if condition="(($vo.is_aa eq 0) and ($vo.is_lockqd eq 0))">
                            <a class="btn  btn-outline btn-danger ajax-a" href="__URL__/adminzengdian/pwid/{$vo.id}" info="确定增点？"> 增点</a>
                            </if>
                            <if condition="(($vo.u_level gt 1) and ($vo.is_lockqd eq 0) and ($vo.is_aa eq 0))">
                            <a class="btn  btn-outline btn-danger ajax-a" href="__URL__/adminpaiwang/pwid/{$vo.id}" info="确定排网？"> 排网</a>
                            </if>--> <eq name="myid" value='2'> <eq
								name="vo.is_show" value='1'> <a
								class="btn  btn-outline btn-info"
								href="__URL__/adminMenberAC/action/show/id/{$vo.id}"
								info="确定隐藏？"> 隐藏</a> </eq> <eq name="vo.is_show" value='0'> <a
								class="btn  btn-outline btn-danger ajax-a"
								href="__URL__/adminMenberAC/action/open_show/id/{$vo.id}"
								info="确定显示？"> 显示</a> </eq> </eq> <eq name="vo.is_lock" value='0'> <a
								class="btn  btn-outline btn-danger ajax-a"
								href="__URL__/adminMenberAC/action/lock/id/{$vo.id}"
								info="确定封号？"> 封号</a> </eq> <eq name="vo.is_lock" value='1'> <a
								class="btn  btn-outline btn-danger ajax-a"
								href="__URL__/adminMenberAC/action/open/id/{$vo.id}"
								info="确定解封？"> 解封</a> </eq> <!--<a class="btn  btn-outline btn-danger ajax-a" href="__URL__/adminMenberAC/action/gpps/id/{$vo.id}" info="确定配送？"> 配送</a>-->
							<a class="btn  btn-outline btn-primary"
							href="{:U('YouZi/adminuserData')}?id={$vo.id}">修改</a> <eq
								name="type" value='0'> <a style="display: none"
								class="btn  btn-outline btn-info" href="__URL__/zip/id/{$vo.id}">下载</a></eq>
							<eq name="type" value='2'> <a
								class="btn  btn-outline btn-primary"
								href="{:U('YouZi/financeDaoChu_MM',array('user_id'=>$vo['id']))}"
								class="btn btn-primary">导出Excel</a> </eq><a style="display: none"
							class="btn  btn-outline btn-primary"
							href="{:U('YouZi/init_userdata',array('user_id'=>$vo['id']))}"
							class="btn btn-primary">初始化</a> <if
								condition="($myid eq 1) OR ($myid eq 30738)"> <a
								class="btn  btn-outline btn-info"
								href="{:U('YouZi/adminuserData')}?id={$vo.id}">查看</a> <a
								style="display: none" class="btn  btn-outline btn-info"
								href="{:U('Change/jdprofile')}?id={$vo.id}">查看节点</a> </if> <a
							style="display: none" class="btn  btn-outline btn-info"
							href="{$vo.reg_url}">注册</a> <EQ name="vo.is_boss" value="1">
							<a class="btn  btn-outline btn-primary"
								href="{:U('YouZi/premAdd')}?id={$vo.id}" style="display: none">权限</a>

							</EQ> <EQ name="vo.is_boss" value="0"> <gt name="vo.id" value="1">
							<a class="btn  btn-outline btn-info"
								href="__URL__/adminMenberAC/action/del/id/{$vo.id}">删除</a> </gt> </EQ>
					</span></td>
				</tr>

				</volist>
			</table>
		</div>
		<!--/列表-->

		<!--内容底部-->
		{$page}
		<!--/内容底部-->

	</form>
</body>
</html>

<script type="text/javascript">
	layui.use('layer', function() {

	});
</script>
<script language="JavaScript">
	ifcheck = true;
	function CheckAll(form) {
		for (var i = 0; i < form.elements.length - 1; i++) {
			var e = form.elements[i];
			e.checked = ifcheck;
		}
		ifcheck = ifcheck == true ? false : true;
	}

	// 输入框失去焦点 ajax 保存
	//	$('input[name^="field_"]').on('blur', function () {
	function ajaxUpdateField(obj, field) {

		var id = $(obj).attr('user_id');

		var value = $(obj).val();

		$.ajax({
			type : 'POST',
			data : {
				id : id,
				field : field,
				value : value
			},
			url : "{:U('YouZi/UpdateField')}",
			success : function(data) {
				layer.msg('修改成功', {
					icon : 1,
					time : 1000
				});
			}
		});
	}
</script>
