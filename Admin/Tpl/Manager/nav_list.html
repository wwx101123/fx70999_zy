
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport"
	content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0,user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<title>后台导航管理</title>
<link rel="stylesheet" type="text/css"
	href="__PUBLIC__/scripts/artdialog/ui-dialog.css" />
<link rel="stylesheet" type="text/css"
	href="__PUBLIC__/Adm/skin/icon/iconfont.css" />
<link rel="stylesheet" type="text/css"
	href="__PUBLIC__/Adm/skin/default/style.css" />
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/scripts/jquery/jquery-1.11.2.min.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/scripts/jquery/jquery.nicescroll.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/scripts/artdialog/dialog-plus-min.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/Adm/js/layindex.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/Adm/js/laymain.js"></script>
<script type="text/javascript" charset="utf-8"
	src="__PUBLIC__/Adm/js/common.js"></script>
<script type="text/javascript" src="__PUBLIC__/Adm/layui/layui.js"></script>
<link href="__PUBLIC__/Adm/layui/css/layui.css" rel="stylesheet">
<style type="text/css">
.tree-list .col-1 {
	width: 6%;
	text-align: center;
}

.tree-list .col-2 {
	width: 14%;
	white-space: nowrap;
	word-break: break-all;
	overflow: hidden;
}

.tree-list .col-3 {
	width: 46%;
	white-space: nowrap;
	word-break: break-all;
	overflow: hidden;
}

.tree-list .col-4 {
	width: 6%;
	text-align: center;
}

.tree-list .col-5 {
	width: 8%;
	text-align: center;
}

.tree-list .col-6 {
	width: 8%;
}

.tree-list .col-7 {
	width: 12%;
	text-align: center;
}
</style>
<script type="text/javascript">
	$(function() {
		//初始化分类的结构
		initCategoryHtml('.tree-list', 1);
		//初始化分类的事件
		$('.tree-list').initCategoryTree(true);
	});
	  layui.use('layer',function() {
          
    });
	 function ajaxUpdateField(obj, field) {

			var id = $(obj).attr('id');

			var value = $(obj).val();

			$.ajax({
				type : 'POST',
				data : {
					id : id,
					field : field,
					value : value
				},
				url : "{:U('Manager/UpdateField')}",
				success : function(data) {
					layer.msg('修改成功', {
						icon : 1,
						time : 1000
					});
				}
			});
		}
</script>
</head>

<body class="mainbody">
	<form id="form1" runat="server">
		<!--导航栏-->
		
		<!--/导航栏-->

		<!--工具栏-->
		<div id="floatHead" class="toolbar-wrap">
			<div class="toolbar">
				<div class="box-wrap">
					<a class="menu-btn"><i class="iconfont icon-more"></i></a>
					<div class="l-list">
						<ul class="icon-list">
							<li><a
								href="{:U('Manager/nav_edit',array('id'=>0,'parent_id'=>0,'action'=>'add'))}"><i
									class="iconfont icon-close"></i><span>新增</span></a></li>
							
							<li><a href="javascript:;" onclick="checkAll(this);"><i
									class="iconfont icon-check"></i><span>全选</span></a></li>

							<li><a id="btnDelete"
								href="javacript:void(0);"OnClick="return ExePostBack('btnDelete','本操作会删除本导航及下属子导航，是否继续？','{:U('Manager/btnDelete_Click' )}');" ><i
									class="iconfont icon-delete"  ></i><span>删除</span></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!--/工具栏-->

		<!--列表-->
		<div class="table-container">
			<div class="tree-list">
				<div class="thead">
					<div class="col col-1">选择</div>
					<div class="col col-2">调用名称</div>
					<div class="col col-3">标题</div>
					<div class="col col-4">显示</div>
					<div class="col col-5">默认</div>
					<div class="col col-6">排序</div>
					<div class="col col-7">操作</div>
				</div>
				<ul>

					<volist name="list" id="vo">
					<li class="layer-{$vo.class_layer}">
						<div class="tbody">
							<div class="col col-1">
								<input id="chkid" class="checkall" type="checkbox"
									name="chkid[]" value="{$vo.id}"
									style="vertical-align: middle;" /> <input id="hidid"
									type="hidden" value="{$vo.id}">
							</div>
							<div class="col col-2">{$vo.name}</div>
							<div class="col index col-3">
								<a
									href="{:U('Manager/nav_edit',array('id'=>$vo['id'],'action'=>'edit'))}">{$vo.title}</a>
								{$vo.link_url}
							</div>
							<div class="col col-4">{$vo.is_lock}</div>
							<div class="col col-5">{$vo.is_sys}</div>
							<div class="col col-6">
								<input   type="Text" value="{$vo.sort_id}" id="{$vo.id}"
									class="sort" onkeydown="return checkNumber(event);" 	onchange="ajaxUpdateField(this,'sort_id');">
							</div>
							<div class="col col-7">
								<a
									href="{:U('Manager/nav_edit',array('id'=>0,'parent_id'=>$vo['parent_id'],'action'=>'add'))}">添子级</a>
								<a
									href="{:U('Manager/nav_edit',array('id'=>$vo['id'],'action'=>'edit'))}">修改</a>
							</div>
						</div>
					</li>
					</volist>
				</ul>
			</div>
		</div>
		<!--/列表-->

	</form>
</body>
</html>
